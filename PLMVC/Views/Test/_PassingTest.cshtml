@model PLMVC.Models.Test.PassingTestViewModel


@Scripts.Render("~/Scripts/customJS.js")

@using (Ajax.BeginForm("PassingTest", "Test", new AjaxOptions { UpdateTargetId = "main_container", LoadingElementId = "loading", HttpMethod = "POST" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h2 class="text-success">Test: @Model.Title</h2>
        <hr />
        @Html.HiddenFor(model => model.Id)
        @Html.HiddenFor(model => model.StartTest)
        @Html.HiddenFor(model => model.FinishTest)
        @Html.HiddenFor(model => model.Questions)
       

        @for (int i = 0; i < Model.Questions.Count; i++)
        {
            int k = i + 1;
            <div style="display:none" id="question-@k" class="question">
                <h3 class="text-info">Question @k</h3>
                <h3 >@Model.Questions[i].Text</h3>
                <table class="table">
                    <tr>
                        <th></th>
                        <th></th>
                    </tr>
                    @{int j = 0;}
                    @foreach (var answer in @Model.Questions[i].Answers)
                    {
                        <tr>
                            <th>
                                @Html.CheckBoxFor(model => model.Results[i][j])
                            </th>
                            <th>@answer.Text</th>
                        </tr>
                        j++;
                    }
                </table>
            </div>
                        }

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input id="finshBtn" type="submit" value="Finish" class="btn btn-default" style="display:none"/>
            </div>
        </div>
    </div>
                        }
<button id="nextBtn" class="btn btn-default"> Next Question </button>


<script>
    var currentNumber = 1;
    var questionsCount = $(".question").length;

    showQuestion();

    function showQuestion() {
        var previous = currentNumber - 1;
        var previousBlock = $("#question-" + previous);
        if (previousBlock) {
            previousBlock.hide();
        }
        var currentBlock = $("#question-" + currentNumber);
        currentBlock.show();

        if (currentNumber === questionsCount) {
            $("#nextBtn").hide();
            $("#finshBtn").show();
        }
    }

    $("#nextBtn").click(function () {
        currentNumber += 1;
        showQuestion();
    });

</script>
